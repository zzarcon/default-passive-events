{"version":3,"file":"index.modern.js","sources":["../src/index.js","../src/utils.js"],"sourcesContent":["import { eventListenerOptionsSupported } from './utils';\r\n\r\nconst defaultOptions = {\r\n  passive: true,\r\n  capture: false\r\n};\r\nconst supportedPassiveTypes = [\r\n  'scroll', 'wheel',\r\n  'touchstart', 'touchmove', 'touchenter', 'touchend', 'touchleave',\r\n  'mouseout', 'mouseleave', 'mouseup', 'mousedown', 'mousemove', 'mouseenter', 'mousewheel', 'mouseover'\r\n];\r\nconst getDefaultPassiveOption = (passive, eventName) => {\r\n  if (passive !== undefined) return passive;\r\n\r\n  return supportedPassiveTypes.indexOf(eventName) === -1 ? false : defaultOptions.passive;\r\n};\r\n\r\nconst getWritableOptions = (options) => {\r\n  const passiveDescriptor = Object.getOwnPropertyDescriptor(options, 'passive');\r\n    \r\n  return passiveDescriptor && passiveDescriptor.writable !== true && passiveDescriptor.set === undefined\r\n    ? Object.assign({}, options)\r\n    : options;\r\n};\r\n\r\nconst overwriteAddEvent = (superMethod) => {\r\n  EventTarget.prototype.addEventListener = function (type, listener, options) {\r\n    const usesListenerOptions = typeof options === 'object' && options !== null;\r\n    const useCapture          = usesListenerOptions ? options.capture : options;\r\n\r\n    options         = usesListenerOptions ? getWritableOptions(options) : {};\r\n    options.passive = getDefaultPassiveOption(options.passive, type);\r\n    options.capture = useCapture === undefined ? defaultOptions.capture : useCapture;\r\n\r\n    superMethod.call(this, type, listener, options);\r\n  };\r\n\r\n  EventTarget.prototype.addEventListener._original = superMethod;\r\n};\r\n\r\nconst supportsPassive = eventListenerOptionsSupported();\r\n\r\nif (supportsPassive) {\r\n  const addEvent = EventTarget.prototype.addEventListener;\r\n  overwriteAddEvent(addEvent);\r\n}\r\n","export const eventListenerOptionsSupported = () => {\r\n  let supported = false;\r\n\r\n  try {\r\n    const opts = Object.defineProperty({}, 'passive', {\r\n      get() {\r\n        supported = true;\r\n      }\r\n    });\r\n\r\n    window.addEventListener('test', null, opts);\r\n    window.removeEventListener('test', null, opts);\r\n  } catch (e) {}\r\n\r\n  return supported;\r\n}\r\n"],"names":["supportedPassiveTypes","superMethod","supported","opts","Object","defineProperty","get","window","addEventListener","removeEventListener","e","eventListenerOptionsSupported","EventTarget","prototype","type","listener","options","usesListenerOptions","useCapture","capture","passive","passiveDescriptor","getOwnPropertyDescriptor","writable","undefined","set","assign","getWritableOptions","indexOf","call","this","_original"],"mappings":"MAMMA,EAAwB,CAC5B,SAAU,QACV,aAAc,YAAa,aAAc,WAAY,aACrD,WAAY,aAAc,UAAW,YAAa,YAAa,aAAc,aAAc,aAgBlEC,IAAAA,ECzBkB,MAC3C,IAAIC,GAAY,EAEhB,IACE,MAAMC,EAAOC,OAAOC,eAAe,GAAI,UAAW,CAChDC,MACEJ,GAAY,KAIhBK,OAAOC,iBAAiB,OAAQ,KAAML,GACtCI,OAAOE,oBAAoB,OAAQ,KAAMN,GACzC,MAAOO,IAET,OAAOR,GD0BeS,KAfGV,EAkBRW,YAAYC,UAAUL,iBAjBvCI,YAAYC,UAAUL,iBAAmB,SAAUM,EAAMC,EAAUC,GACjE,MAAMC,EAAyC,iBAAZD,GAAoC,OAAZA,EACrDE,EAAsBD,EAAsBD,EAAQG,QAAUH,EAjBxC,IAACI,GAmB7BJ,EAAkBC,EAbMD,CAAAA,IAC1B,MAAMK,EAAoBjB,OAAOkB,yBAAyBN,EAAS,WAEnE,OAAOK,IAAoD,IAA/BA,EAAkBE,eAA+CC,IAA1BH,EAAkBI,IACjFrB,OAAOsB,OAAO,GAAIV,GAClBA,GAQsCW,CAAmBX,GAAW,IAC9DI,aAnBMI,KADeJ,EAoBaJ,EAAQI,SAnBlBA,GAEmB,IAA9CpB,EAAsB4B,QAiBgCd,KA5BpD,EA6BPE,EAAQG,aAAyBK,IAAfN,GAAoDA,EAEtEjB,EAAY4B,KAAKC,KAAMhB,EAAMC,EAAUC,IAGzCJ,YAAYC,UAAUL,iBAAiBuB,UAAY9B"}